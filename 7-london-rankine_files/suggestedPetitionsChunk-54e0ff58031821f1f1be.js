(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1208:function(e,t,n){"use strict";var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var e=/\s/,t=/<(\w*)>/g;return function(n,r){n=n||"";var i,o,a,c=0,s=0,l="",u="",p=!1;for("string"==typeof r?r=function(e){for(var n,r=[];null!==(n=t.exec(e));)r.push(n[1]);return 0!==r.length?r:null}(r):Array.isArray(r)||(r=null),i=0,o=n.length;i<o;i++)switch(a=n[i]){case"<":if(p)break;if(" "==n[i+1]){d(a);break}if(0==c){c=1,d(a);break}if(1==c){s++;break}d(a);break;case">":if(s){s--;break}if(p)break;if(1==c){p=c=0,r&&(u+=">",m());break}if(2==c){p=c=0,u="";break}if(3==c&&"-"==n[i-1]&&"-"==n[i-2]){p=c=0,u="";break}d(a);break;case'"':case"'":1==c&&(p==a?p=!1:p||(p=a)),d(a);break;case"!":if(1==c&&"<"==n[i-1]){c=2;break}d(a);break;case"-":if(2==c&&"-"==n[i-1]&&"!"==n[i-2]){c=3;break}d(a);break;case"E":case"e":if(2==c&&"doctype"==n.substr(i-6,7).toLowerCase()){c=1;break}d(a);break;default:d(a)}function d(e){0==c?l+=e:r&&1==c&&(u+=e)}function m(){var t,n,i,o="",a=!1;e:for(t=0,n=u.length;t<n;t++)switch(i=u[t].toLowerCase()){case"<":break;case">":break e;case"/":a=!0;break;default:if(i.match(e)){if(a)break e}else a=!0,o+=i}-1!==r.indexOf(o)&&(l+=u),u=""}return l}})?r.apply(t,i):r)||(e.exports=o)},1294:function(e,t,n){function r(){var e=a(["\n  query($petitionId: ID!, $countryCode: String!, $locale: String!, $first: Int!, $channel: String) {\n    petitionById(id: $petitionId) {\n      id\n      suggestedPetitionsConnection(first: $first, countryCode: $countryCode, locale: $locale, channel: $channel) {\n        edges {\n          type\n          algorithm\n          promotionToken\n          node {\n            id\n            slug\n            ask\n            description\n            photo {\n              id\n              petitionSmall {\n                url\n                processing\n              }\n            }\n            video {\n              photo {\n                id\n                petitionSmall {\n                  url\n                  processing\n                }\n              }\n            }\n            signatureCount {\n              displayed\n              goal\n            }\n            promotersConnection {\n              totalCount\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return r=function(){return e},e}function i(){var e=a(["\n  query {\n    appState @client {\n      countryCode\n      locale\n      browser {\n        breakpoint\n        useragent {\n          isBot\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=a(["\n  mutation($input: TrackPromotedEventInput!) {\n    trackPromotedEvent(input: $input) {\n      success\n    }\n  }\n"]);return o=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(0),p=n(35),d=p.BorderBox,m=p.Box,g=p.Heading,f=p.Text,b=n(1),h=n(50),E=h.Query,k=h.Mutation,y=n(28),v=n(68).convert({cap:!1}),R=n(1156),O=n(265),x=n(76),C=n(1649),P=n(67).Link,_=n(1208),q=n(439).IntlContext,w=n(152).EventTrackerContext,T=n(66),I=n(479),S=n(1138),j=n(1139),D=n(1188),N=n(1132),M=n(116).I18nPhrase,$=n(1210),B=n(1292).setPromotedTrackingDataInLocalStorage,L=n(1345),z=n(1336),A=b.shape({id:b.string.isRequired,slug:b.string.isRequired,signatureCount:b.shape({displayed:b.number.isRequired,goal:b.number.isRequired}).isRequired,promotersConnection:b.shape({totalCount:b.number.isRequired}).isRequired}),H={PROMOTED:"sponsored",RECOMMENDED:"trending",TRENDING:"trending"},J=function(e){var t=e.type,n=e.petition.promotersConnection.totalCount;return"PROMOTED"===t?u.createElement(q.Consumer,null,(function(e){var t=e.formatNumber;return u.createElement(M,{phrase:"components.discover_feed.promoted_petitions.heading",num:t()(n),count:n})})):"RECOMMENDED"===t?u.createElement(M,{phrase:"components.petition_card.recommended"}):u.createElement(M,{phrase:"components.petition_card.trending"})};J.propTypes={type:b.string.isRequired,petition:A.isRequired};var F=function(e){var t=e.petition,n=e.type,r=e.algorithm,i=e.parentPetitionId,o=e.sourceLocation,a=e.gridPosition,c=e.promotionToken,l=s({original_footer_petition_id:i,algorithm:r,source_location:o,grid_position:a},c&&{pt:c}),p={card_petition_id:t.id,page_petition_id:i,grid_position:a},b=T.petitionShow(t,l),h=function(e){return x("video.photo.petitionSmall")(e)||x("photo.petitionSmall")(e)||{url:"https://static.change.org/images/default-petition-darker.gif",processing:!1}}(t);return u.createElement(w.Consumer,null,(function(e){return u.createElement(d,{bg:"white",borderRadius:1,border:0},u.createElement(P,{to:b,className:"link-block",rel:"nofollow"},u.createElement(m,{py:"s",px:"xs"},u.createElement(f,{fontSize:"s"},u.createElement("div",{className:"arrange"},u.createElement("div",{className:"arrange-fit"},u.createElement(N,{name:H[n],size:"s",weak:!0,marginRight:"xs"})),u.createElement("div",{className:"arrange-fill"},u.createElement("strong",null,u.createElement(J,{type:n,petition:t}))))))),u.createElement(z,{url:h.url,processing:h.processing,aspectRatio:"16:9"}),u.createElement($,{signatureCount:t.signatureCount,rounded:!1}),u.createElement(m,{pt:"s",px:"xs"},u.createElement(D,{height:120,fixedHeight:!0,readMore:u.createElement(f,{fontSize:"s",fontWeight:"normal",color:"black"},"â€¦"," ",u.createElement(P,{to:b,className:"link link-subtle type-faded",onClick:function(){return e("petition_card_click",s({},p,{click_location:"read_more"}))}},u.createElement(M,{phrase:"pages.common.read_more"})))},u.createElement(g,{as:"h4",variant:"h4",mb:"xxs",pb:"xxxs"},u.createElement(P,{to:b,className:"link link-stealth",onClick:function(){return e("petition_card_click",s({},p,{click_location:"title"}))}},t.ask)),u.createElement("div",{className:"type-s"},_(t.description))),u.createElement(m,{pt:"s",pb:"m"},u.createElement(P,{className:"btn btn-big btn-full btn-outline",to:T.petitionSign(s({petition:t},l)),onClick:function(){e("petition_card_sign_click",p)}},u.createElement(M,{phrase:"components.petition_card.sign_button"})))))}))};F.propTypes={petition:A.isRequired,type:b.string.isRequired,algorithm:b.string.isRequired,parentPetitionId:b.string.isRequired,sourceLocation:b.string.isRequired,gridPosition:b.number.isRequired,promotionToken:b.string},F.defaultProps={promotionToken:null};var G=y(o()),Q=function(e){var t=e.petitionId,n=e.promotionToken,r=e.placement,i=e.countryCode;return u.createElement(k,{mutation:G},(function(e){return u.createElement(L,{onEnter:function(){B(t,{promotionToken:n,placement:r}),e({variables:{input:{eventType:"IMPRESSION",promotionToken:n,placement:r,countryCode:i}}})}})}))};Q.propTypes={petitionId:b.string.isRequired,promotionToken:b.string.isRequired,placement:b.string.isRequired,countryCode:b.string.isRequired};var W=function(e){return R({type:"PROMOTED"})(e)?"pages.home.promoted_petitions.header":R({type:"RECOMMENDED"})(e)?"pages.home.recommended_petitions.header":"components.trending_petition.header"},K=y(i()),U=y(r()),V=function(e){var t=e.petition,n=e.sourceLocation;return u.createElement(E,{query:K},(function(e){var r=e.data.appState,i=r.countryCode,o=r.locale,a=r.browser,c=a.breakpoint,s=a.useragent.isBot;return u.createElement(E,{query:U,variables:{petitionId:t.id,first:15,countryCode:i,locale:o,channel:n},cachePolicy:"no-cache"},(function(e){var r=e.data;if(e.loading)return u.createElement(I,null);var o=r.petitionById.suggestedPetitionsConnection.edges;if(O(o))return null;var a="xs"===c?o:C(o.length%3)(o);return u.createElement(u.Fragment,null,u.createElement(m,{mt:"xxl",mb:{xs:"xxxl",s:"xxl"},pb:{xs:"xs"}},u.createElement(g,{as:"h3",variant:"h3"},u.createElement(M,{phrase:W(o)}))),u.createElement(S,null,v((function(e,r){var o=e.node,a=e.type,c=e.algorithm,l=e.promotionToken;return u.createElement(j,{sm:4,key:o.id,marginBottom:"l"},"PROMOTED"===a&&!s&&u.createElement(Q,{petitionId:o.id,promotionToken:l,placement:n,countryCode:i}),u.createElement(F,{petition:o,type:a,algorithm:c,parentPetitionId:t.id,sourceLocation:n,gridPosition:r+1,promotionToken:l}))}))(a)))}))}))};V.propTypes={petition:b.shape({id:b.string.isRequired}).isRequired,sourceLocation:b.string.isRequired},e.exports=V},1336:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=n(0),o=n(35),a=o.BorderBox,c=o.AspectRatioCoverImage,s=n(1),l=n(460),u=function(e){var t=e.aspectRatio,n=e.circle,r=e.url;return i.createElement(a,{border:0,borderRadius:n?2:0,overflow:"hidden"},i.createElement(c,{aspectRatio:t,coverBackgroundImage:"url('".concat(r,"')")}))};u.propTypes={aspectRatio:c.propTypes.aspectRatio.isRequired,circle:s.bool.isRequired,url:s.string.isRequired};e.exports=function(e){return i.createElement(l,r({},e,{readyState:u}))}},1649:function(e,t,n){var r=n(12)("dropRight",n(1650));r.placeholder=n(11),e.exports=r},1650:function(e,t,n){var r=n(213),i=n(77);e.exports=function(e,t,n){var o=null==e?0:e.length;return o?(t=n||void 0===t?1:i(t),r(e,0,(t=o-t)<0?0:t)):[]}}}]);
//# sourceMappingURL=suggestedPetitionsChunk-54e0ff58031821f1f1be.js.map