function loadDeviceSize(){if(g_pl_init_complete){var device=determineDevice();device!==g_device&&(g_device=device,initProductlist())}}function initProductlist(){g_pl_init_complete||(g_device=determineDevice()),g_pl_listing_arr=JSON.parse(pl_listing_json),g_pl_filter_arr=JSON.parse(pl_attribute_json),applyURLFilterAnchor(),groupNumericFilters(),rebuildLister(g_pl_current_page),g_pl_init_complete=!0}function applyURLFilterAnchor(){for(var url_str=window.location.hash.substring(1),filter_arr=url_str.split("&"),i=0;i<filter_arr.length;i++){var filter_split=decodeURIComponent(filter_arr[i]).split("="),facet_name=filter_split[0];if(void 0===facet_name||void 0===filter_split[1])return;for(var value_arr=filter_split[1].split(","),x=0;x<value_arr.length;x++){var filter_value=value_arr[x].replace(/%20/g," ");if("sort"!==facet_name)if("keyword"===facet_name&&el("pl_fbk_input"))g_pl_keyword_filter=filter_value;else if("lpp"!==facet_name)if("page"!==facet_name)for(var y=0;y<g_pl_filter_arr.length;y++)g_pl_filter_arr[y].facet===facet_name&&applyFilter(g_pl_filter_arr[y].name,g_pl_filter_arr[y].type,filter_value);else g_pl_current_page=parseInt(filter_value);else g_pl_max_per_page=parseInt(filter_value);else g_pl_sort=filter_value}}}function valueToBucket(value){for(var bucket_id=0;value>10;)value/=10,bucket_id++;return 10*bucket_id+parseInt(value)}function bucketToValue(b_id){for(var value=1;b_id>10;)value*=10,b_id-=10;return value*b_id}function bucketToMinMaxValue(bucket_id){var temp=bucket_id.split("b");return[bucketToValue(parseInt(temp[1])),bucketToValue(parseInt(temp[2])+1)-1]}function groupNumericFilters(){for(var i=0;i<g_pl_filter_arr.length;i++){var filter=g_pl_filter_arr[i];if(2===filter.value_type){for(var bucket_arr={},variant_count=0,j=0;j<filter.value_arr.length;j++){var attr_value=filter.value_arr[j];if(attr_value.cmp_value){variant_count+=attr_value.count;var bucket_id=valueToBucket(attr_value.cmp_value);bucket_arr["b"+bucket_id]?bucket_arr["b"+bucket_id]+=attr_value.count:bucket_arr["b"+bucket_id]=1}}var is_empty=!0;for(var prop in bucket_arr)if(bucket_arr.hasOwnProperty(prop)){is_empty=!1;break}if(!is_empty){var bucket_size_threshold=variant_count/6,new_bucket_arr={},merged_bucket_arr=[];for(var b_id in bucket_arr)if(bucket_arr.hasOwnProperty(b_id)){for(var bucket=bucket_arr[b_id],total=0,idx=0;idx<merged_bucket_arr.length;idx++)total+=bucket_arr[merged_bucket_arr[idx]];total+bucket>bucket_size_threshold&&merged_bucket_arr.length>0&&(new_bucket_arr[merged_bucket_arr[0]+""+merged_bucket_arr[merged_bucket_arr.length-1]]=total,merged_bucket_arr=[]),merged_bucket_arr.push(b_id)}for(var total=0,idx=0;idx<merged_bucket_arr.length;idx++)total+=bucket_arr[merged_bucket_arr[idx]];new_bucket_arr[merged_bucket_arr[0]+""+merged_bucket_arr[merged_bucket_arr.length-1]]=total;var sequence=1,value_arr=[];for(var b_id in new_bucket_arr)if(new_bucket_arr.hasOwnProperty(b_id)){var temp=bucketToMinMaxValue(b_id),min=temp[0],max=temp[1];value_arr.push({name:min+","+max,display_name:min+filter.cmp_uom+" - "+max+filter.cmp_uom,applied:null,sequence:sequence++})}filter.value_arr=value_arr,filter.banded=!0}}}}function rebuildLister(target_page){void 0===target_page&&(target_page=1),g_pl_current_page=target_page,renderLPPOptions(),renderFilters(),qualifyListings(),renderFilterPills(),sortListingArr(),determineListingPageNumbers(),determineListingPageNumbers(),renderListingsForPage(g_pl_current_page),buildURLFilterHash()}function renderLPPOptions(){var html='<option value="12">12 Products Per Page</option><option value="24">24 Products Per Page</option>';"c3"!=g_device&&"c4"!=g_device||(html+='<option value="48">48 Products Per Page</option><option value="96">96 Products Per Page</option>');var lpp=el("pl_listings_per_page");lpp.innerHTML=html,lpp.value=g_pl_max_per_page}function applySort(elem){g_pl_sort=elem.value,rebuildLister(g_pl_current_page),el("pl_filters").innerHTML=renderFilterArr()}function sortListingArr(custom_sort){var sort=void 0===custom_sort?g_pl_sort:custom_sort;switch(el("pl_sort_dropdown").value=sort,sort){case"relevance":g_pl_is_search?g_in_stock_only?g_pl_listing_arr.sort(sortListingArrByRelevanceAndIso):g_pl_listing_arr.sort(sortListingArrByScore):g_pl_listing_arr.sort(sortListingArrByRelevance);break;case"price_lth":g_pl_listing_arr.sort(sortListingArrByPriceLTH);break;case"price_htl":g_pl_listing_arr.sort(sortListingArrByPriceHTL);break;case"review":g_pl_listing_arr.sort(sortListingArrByReview)}}function sortListingArrByScore(a,b){return b.solr_total_score-a.solr_total_score}function sortListingArrByRelevance(a,b){return a.sequence-b.sequence}function sortListingArrByRelevanceAndIso(a,b){var a_val=a.InstoreOnly?-10:0,b_val=b.InstoreOnly?-10:0,a_sequence=a.sequence?-10:0,b_sequence=b.sequence?-10:0;return b_val+b_sequence-(a_val+a_sequence)}function sortListingArrByPriceLTH(a,b){return(a.min_price?a.min_price:a.price)-(b.min_price?b.min_price:b.price)}function sortListingArrByPriceHTL(a,b){return(b.min_price?b.min_price:b.price)-(a.min_price?a.min_price:a.price)}function sortListingArrByReview(a,b){return b.review_score===a.review_score?b.review_count-a.review_count:b.review_score-a.review_score}function renderFilters(){var html=renderFilterArr();return el("pl_filter_panel_content").innerHTML="",el("pl_filters").innerHTML="",""===html&&($("#pl_filters_wrapper .pl_filter_refine").hide(),$("#pl_listings_wrapper").removeClass("col-md-10")),"c1"===g_device||"c2"===g_device?(hideEl("pl_filters"),void(el("pl_filter_panel_content").innerHTML=html)):(showEl("pl_filters"),void(el("pl_filters").innerHTML=html))}function showMobileFilterPanel(open){return document.body.scrollTop=document.documentElement.scrollTop=0,open?void(el("pl_filter_panel").style.right="0"):void(el("pl_filter_panel").style.right="-100vw")}function closeMobileFilters(){$("#pl_filter_overlay, #pl_filter_panel").hide()}function renderFilterPills(){var html="",num_pills=0;g_in_stock_only=!1;for(var i=0;i<g_pl_applied_filter_arr.length;i++){var applied_filter=g_pl_applied_filter_arr[i];if("has_promo_f"!==applied_filter.name)for(var x=0;x<g_pl_filter_arr.length;x++){var filter=g_pl_filter_arr[x];if(filter.facet===applied_filter.name)for(var y=0;y<filter.value_arr.length;y++)for(var filter_value=filter.value_arr[y],z=0;z<applied_filter.value_arr.length;z++)if(applied_filter.value_arr[z]===filter_value.name){var display_name=void 0===filter_value.display_name?filter_value.name:filter_value.display_name;display_name=filter.name+": "+display_name,"in_stock_f"==applied_filter.name&&(g_in_stock_only=!0,display_name="Availability: In Stock Only"),num_pills++,html+='<div class="pl_filter_pill" onclick="applyFilter( \''+filter.name+"', '"+filter_value.type+"', '"+filter_value.name+"');\">"+display_name+'<img class="margin-left-md pull-right" style="height: 15px; width: 15px; margin-top: 2px;" src="/img/close_cross.png"></div>'}}}num_pills>=1&&(html='<div class="pl_filter_pill_all" onclick="clearAllFilters();">Clear All Filters</div>'+html),el("pl_filter_pills").innerHTML=html}function clearAllFilters(){for(var i=0;i<g_pl_filter_arr.length;i++){var filter=g_pl_filter_arr[i];if("has_promo_f"!==filter.facet)for(var x=0;x<filter.value_arr.length;x++)filter.value_arr[x].applied=0}rebuildLister()}function renderFilterArr(){for(var html=renderKeywordFilter(),i=0;i<g_pl_filter_arr.length;i++)html+=renderFilter(g_pl_filter_arr[i],i===g_pl_filter_arr.length-1);return html}function renderKeywordFilter(){return""}function renderFilter(filter,last_filter){var last_filter_html=last_filter?'style="border-bottom: 1px solid #CCC"':"",html='<div class="row pl_filter" '+last_filter_html+'><div class="col-xs-12">',has_applied=0,has_values=!1;if(void 0===filter.value_arr||filter.value_arr.length<=1)return"";for(var i=0;i<filter.value_arr.length;i++)has_values=!0,filter.value_arr[i].applied&&(has_applied=1);if(!has_values||1===filter.value_arr.length)return"";if(g_pl_active_filter===filter.name&&(has_applied=1),"in_stock_f"===filter.facet)return renderCustomFilter(filter);var show_filter=has_applied||"Department"===filter.name;html+=renderFilterTitle(filter.name,show_filter);var js_class="pl_filter_value_"+filter.name.replace(/[\s()]/g,""),display_css=show_filter?"block":"none";if(2===filter.value_arr.length||"has_promo_f"===filter.facet){for(var has_true=!1,has_false=!1,applied=!1,j=0;j<filter.value_arr.length;j++){var filter_value=filter.value_arr[j];"true"==filter_value.name&&(filter_value.applied&&(applied=!0),has_true=!0),"has_promo_f"===filter.facet&&has_true&&(g_pl_offers_only=!0),"false"==filter_value.name&&(has_false=!0)}if(has_true&&has_false){switch(filter.facet){case"has_promo_f":return g_pl_offers_only=filter_value.applied,"";default:return""}var checked_html=applied?'checked="checked"':"";return html+='<div class="row '+js_class+' pl_filter_value" style="display: '+display_css+'" onclick="applyFilter( \''+filter.name+"', 'toggle', 'true');\"><div class=\"col-xs-12\"><input type=\"checkbox\" "+checked_html+' class="margin-right-md" /><span style="position: relative; top: -1px;">'+filter.name+"</span></div></div>",html+="</div></div>"}}var overflow_css=filter.value_arr.length>4?"scroll":"none";html+='<div class="row"><div class="col-xs-12 padding-bottom-md '+js_class+'" style="max-height: 200px; overflow-y: '+overflow_css+"; display: "+display_css+';">';for(var i=0;i<filter.value_arr.length;i++)html+=renderFilterValue(filter.name,filter.value_arr[i],filter.type);return html+="</div></div></div></div>"}function renderCustomFilter(filter){if("in_stock_f"===filter.facet){for(var applied=("pl_filter_value_"+filter.name.replace(/[\s()]/g,""),!1),i=0;i<filter.value_arr.length;i++)"true"==filter.value_arr[i].name&&filter.value_arr[i].applied&&(applied=!0);var html='<div class="row pl_filter"><div class="col-xs-12">';html+='<div class="row pl_filter_title"><div class="col-xs-12"><span>Availability</span></div></div>';var applied_class=applied?"pl_filter_applied":"",applied_cross=applied?'<img style="float: right; height: 15px; width: 15px; margin-top: 2px;" src="/img/close_cross.png" />':"";return html+='<div class="row pl_filter_value margin-bottom-md '+applied_class+'" onclick="applyFilter( \''+filter.name+"', 'category', 'true');\"><div class=\"col-xs-12\">In Stock Only"+applied_cross+"</div></div>"}}function renderFilterTitle(name,expanded){var js_class="pl_filter_value_"+name.replace(/[\s()]/g,""),img_src=expanded?"/img/chevron-down.png":"/img/chevron-right.png";return'<div class="row pl_filter_title" data-expanded="'+(expanded?1:0)+'" onclick="toggleFilterValues( this, \''+js_class+'\' );"><div class="col-xs-12"><span>'+name+'</span><img src="'+img_src+'" class="pl_filter_title_chevron" id="pl_filter_title_chevron_'+js_class+'"/></div></div>'}function toggleFilterValues(title_elem,filter_name){var img_elem=el("pl_filter_title_chevron_"+filter_name),is_expanded=title_elem.dataset.expanded;return"1"===is_expanded?(img_elem.src="/img/chevron-right.png",title_elem.setAttribute("data-expanded","0"),void $("."+filter_name).hide()):(img_elem.src="/img/chevron-down.png",title_elem.setAttribute("data-expanded","1"),void $("."+filter_name).show())}function renderFilterValue(name,value,type){var applied_class=value.applied?"pl_filter_applied":"",applied_cross=value.applied?'<img style="float: right; height: 15px; width: 15px; margin-top: 2px;" src="/img/close_cross.png" />':"";switch(type){case"range":return'<div class="row pl_filter_value '+applied_class+'" onclick="applyFilter( \''+name+"', '"+type+"', '"+value.name+'\');"><div class="col-xs-12">'+value.display_name+applied_cross+"</div></div>";case"category":return'<div class="row pl_filter_value '+applied_class+'" onclick="applyFilter( \''+name+"', '"+type+"', '"+value.name+'\');"><div class="col-xs-12">'+value.display_name+applied_cross+"</div></div>";case"navigation":return'<div class="row pl_filter_value"><a href="/'+value.url+'"><div class="col-xs-12">'+value.display_name+"</div></a></div>"}return""}function filterByKeyword(elem){g_pl_keyword_filter=elem.value}function applyFilter(name,type,value,min_value,max_value){var found=!1;g_pl_active_filter=name;for(var i=0;i<g_pl_filter_arr.length;i++){var filter=g_pl_filter_arr[i];if(filter.name===name){for(var x=0;x<filter.value_arr.length;x++){var filter_value=filter.value_arr[x];if(filter_value.name==value){var applied=!filter_value.applied;g_pl_is_search&&"in_stock_f"===filter.facet&&!g_pl_init_complete&&(applied=!0),g_pl_num_filter_applied=applied?g_pl_num_filter_applied+1:g_pl_num_filter_applied-1,filter_value.applied=applied,found=!0;break}}if(found)break}}$("#pl_filters").html(renderFilterArr()),rebuildLister()}function buildURLFilterHash(){for(var url_arr=[],i=0;i<g_pl_applied_filter_arr.length;i++)url_arr.push(g_pl_applied_filter_arr[i].name+"="+encodeURIComponent(g_pl_applied_filter_arr[i].value_arr.join(",")));var url_str=url_arr.join("&");url_str+="&sort="+g_pl_sort,g_pl_keyword_filter.length>0&&(url_str+="&keyword="+g_pl_keyword_filter),url_str+="&page="+g_pl_current_page,url_str+="&lpp="+g_pl_max_per_page,"&"===url_str.charAt(0)&&(url_str=url_str.substring(1)),window.location.hash=url_str.length?"#"+url_str:""}function qualifyListings(){g_pl_num_qual_listings=0;var keyword="";g_pl_applied_filter_arr=[];for(var i=0;i<g_pl_filter_arr.length;i++){var filter=g_pl_filter_arr[i],applied_filter={name:filter.facet,value_arr:[],banded:filter.banded};if(!(void 0===filter.value_arr||filter.value_arr.length<=1)){for(var x=0;x<filter.value_arr.length;x++){var value=filter.value_arr[x];value.applied&&applied_filter.value_arr.push(value.name)}applied_filter.value_arr.length>0&&g_pl_applied_filter_arr.push(applied_filter)}}var required_filter_matches=g_pl_applied_filter_arr.length;if(0!==required_filter_matches)for(var i=0;i<g_pl_listing_arr.length;i++){for(var listing=g_pl_listing_arr[i],filter_matches=0,x=0;x<g_pl_applied_filter_arr.length;x++)for(var applied_filter=g_pl_applied_filter_arr[x],applied_filter_checked=!1,y=0;y<listing.filter_arr.length;y++){var listing_filter=listing.filter_arr[y];if(listing_filter.name===applied_filter.name){for(var matched_value=!1,z=0;z<applied_filter.value_arr.length;z++){if(applied_filter.banded===!0){var value_num=Number(listing_filter.cmp_value),bands=applied_filter.value_arr[z].split(",");if(parseInt(bands[0])<=value_num&&parseInt(bands[1])>=value_num){matched_value=!0;continue}}"object"!=typeof listing_filter.value&&(listing_filter.value=[listing_filter.value]);for(var idx=0;idx<listing_filter.value.length;idx++)if(applied_filter.value_arr[z]==listing_filter.value[idx]){matched_value=!0;break}}!matched_value||applied_filter_checked||(filter_matches++,applied_filter_checked=!0)}}if(filter_matches<required_filter_matches)listing.qualified=!1;else if(el("pl_fbk_input")&&(keyword=el("pl_fbk_input")&&g_pl_keyword_filter!==!1&&g_pl_keyword_filter.length>0?g_pl_keyword_filter.replace(/\s/g,"").toLowerCase():"",keyword.length>0)){if(listing.title.toLowerCase().replace(/\s/g,"").indexOf(keyword)!==-1){listing.qualified=!0,g_pl_num_qual_listings++;continue}listing.qualified=!1}else g_pl_num_qual_listings++,listing.qualified=!0}else{keyword=el("pl_fbk_input")&&g_pl_keyword_filter!==!1?g_pl_keyword_filter.replace(/\s/g,"").toLowerCase():"";for(var k=0;k<g_pl_listing_arr.length;k++){var listing=g_pl_listing_arr[k];if(el("pl_fbk_input")&&keyword.length>0){if(listing.title.toLowerCase().replace(/\s/g,"").indexOf(keyword)!==-1){listing.qualified=!0,g_pl_num_qual_listings++;continue}listing.qualified=!1}else g_pl_num_qual_listings++,listing.qualified=!0}}}function determineListingPageNumbers(){for(var count=0,current_page_count=1,i=0;i<g_pl_listing_arr.length;i++){var listing=g_pl_listing_arr[i];listing.qualified&&(g_pl_max_per_page===count&&(count=0,current_page_count++),listing.pl_page=current_page_count,count++)}}function applyListingsPerPage(lpp){g_pl_max_per_page=parseInt(lpp.value),g_pl_current_page=1,rebuildLister(g_pl_current_page)}function renderListingsForPage(page_number){g_pl_current_page=page_number,$("#pl_listings").html("").hide(),renderPagination(page_number),determineListingPageNumbers();var html=renderListingArr(page_number);$("#pl_listings").html(html),$(".pl_showing_count").html(g_pl_num_qual_listings),document.body.scrollTop=document.documentElement.scrollTop=0,$("#pl_listings").show(),equaliseListings(),buildURLFilterHash()}function equaliseListings(){equaliseListingRows(".js_listing .title"),equaliseListingRows(".js_listing .offer"),equaliseListingRows(".js_listing .price"),equaliseListingRows(".js_listing .was-price"),equaliseListingRows(".js_listing .price-saving"),equaliseListingRows(".js_listing .review"),equaliseListingRows(".js_listing .badge")}function equaliseListingRows(selector){for(var max_height=0,iteration=0,current_listing_arr=[],els=$(selector),i=0;i<els.length;i++)if(iteration++,current_listing_arr.push(els[i]),max_height=$(els[i]).outerHeight()>max_height?$(els[i]).outerHeight():max_height,iteration===g_pl_listings_per_row){for(var j=0;j<current_listing_arr.length;j++)$(current_listing_arr[j]).css("height",max_height);current_listing_arr=[],iteration=0,max_height=0}for(var k=0;k<current_listing_arr.length;k++)$(current_listing_arr[k]).css("height",max_height)}function renderPagination(current_page){for(var page_max=0,i=0;i<g_pl_listing_arr.length;i++)g_pl_listing_arr[i].qualified&&g_pl_listing_arr[i].pl_page>page_max&&(page_max=g_pl_listing_arr[i].pl_page);var previous_page=current_page-1,next_page=current_page>=page_max?page_max:current_page+1,html="",selected_css="",onclick_html=previous_page>=1?'onclick="renderListingsForPage( '+previous_page+' );"':"";if(html+=""===onclick_html?"":'<img src="/img/chevron-left.png" style="height: 16px; margin-right: 20px;" '+onclick_html+" />",1!==page_max&&(selected_css=1===current_page?"color: #000;":"",html+='<span style="margin-right: 20px;'+selected_css+'" onclick="renderListingsForPage( 1 );">1</span>'),previous_page=current_page-1,previous_page>2&&(html+='<span style="margin-right: 20px; cursor: auto;">...</span>'),previous_page>1&&(html+='<span style="margin-right: 20px;" onclick="renderListingsForPage( '+previous_page+' );">'+previous_page+"</span>"),current_page>1&&current_page<page_max&&(html+='<span style="margin-right: 20px; color: #000;">'+current_page+"</span>"),next_page=current_page+1,next_page!==page_max&&next_page<page_max&&(html+='<span style="margin-right: 20px;" onclick="renderListingsForPage( '+next_page+' );">'+next_page+"</span>"),next_page!==page_max-1&&next_page<page_max&&(html+='<span style="margin-right: 20px; cursor: auto;">...</span>'),current_page===page_max&&1!==current_page?html+='<span style="margin-right: 20px; color: #000;">'+page_max+"</span>":(selected_css=current_page===page_max?"color: #000;":"",html+='<span style="margin-right: 20px; '+selected_css+';" onclick="renderListingsForPage( '+page_max+' );">'+page_max+"</span>"),next_page<=page_max){var margin_html="c1"===g_device?"":"margin-right: 20px;";html+='<img src="/img/chevron-right.png" style="height: 16px; '+margin_html+'" onclick="renderListingsForPage( '+next_page+' );" />'}el("pl_pagination").innerHTML=html}function renderListingArr(page_number){for(var html="",gtm_product_data=[],gtm_position=1,i=0;i<g_pl_listing_arr.length;i++){var listing=g_pl_listing_arr[i];if(listing.qualified&&!(listing.pl_page<page_number)){if(listing.pl_page>page_number){0!==gtm_product_data.length&&(dataLayer.push({event:"browseLister",nonInteraction:g_nonInteraction,ecommerce:{currencyCode:"GBP",impressions:gtm_product_data}}),g_nonInteraction===!1&&(g_nonInteraction=!0));break}gtm_product_data_listing={category:listing.pretty_breadcrumb,id:listing.product_code,name:listing.title,page_number:listing.pl_page,position:gtm_position++,price:listing.price/100,prod_id:listing.product_id,variant_id:listing.variant_id},gtm_product_data.push(gtm_product_data_listing),12===gtm_product_data.length&&(dataLayer.push({event:"browseLister",nonInteraction:g_nonInteraction,ecommerce:{currencyCode:"GBP",impressions:gtm_product_data}}),gtm_product_data=[],g_nonInteraction===!1&&(g_nonInteraction=!0)),html+=renderListing(listing)}}return""===html?(hideEl("pl_listings_per_page"),hideEl("pl_sort_by"),hideEl("pl_pagination"),hideEl("pl_view_option"),renderNoListingNotice()):(showEl("pl_listings_per_page"),showEl("pl_sort_by"),showEl("pl_pagination"),showEl("pl_view_option"),html)}function renderNoListingNotice(){return'<div class="row margin-bottom-md" style="margin-top: 30px;"><div class="col-xs-12" style="text-align: center;"><img src="/img/no_search_results.png" style="width: 50px; height: 50px;" /><h4>There are no products to show</h4></div></div>'}function renderListing(listing){var media_html=listing.multi_sku?renderListingMedia(listing.variant_media_url,listing.product_url):renderListingMedia(listing.variant_media_url,listing.variant_url),promo_html=renderListingPromotion(listing.promo_name,listing.multi_sku,listing.price,listing.price_was,listing.price_was_save,listing.price_was_percent,listing.min_price),title_html=listing.multi_sku?renderListingTitle(listing.title,g_device,listing.product_url):renderListingTitle(listing.title,g_device,listing.variant_url),review_html=renderListingReview(listing.review_qualified,listing.review_score,listing.review_count),cta_html=(renderListingPrice(listing.min_price,listing.price,listing.price_per_uom),renderListingCTA(listing)),badge_html=renderListingBadge(listing),listing_width="50%";switch(g_pl_listings_per_row=2,g_device){case"c1":listing_width="50%",g_pl_listings_per_row=2;break;case"c2":listing_width="33.3333%",g_pl_listings_per_row=3;break;case"c3":listing_width="25%",g_pl_listings_per_row=4;break;case"c4":listing_width="25%",g_pl_listings_per_row=4}return'<div class="col-xs-3 js_listing" style="margin-bottom: 20px; width: '+listing_width+';">'+media_html+title_html+promo_html+'<div class="review">'+review_html+"</div>"+badge_html+cta_html+"</div>"}function renderListingPromotion(offer,multi_sku,price,price_was,price_was_save,price_was_percent,min_price){var html="";return html+=offer?'<div class="row"><div class="col-xs-12 offer" style="">'+offer+"</div></div>":'<div class="row"><div class="col-xs-12 offer" style=""></div></div>',html+=price?multi_sku?'<div class="row"><div class="col-xs-12 price" style="">From £'+(min_price/100).toFixed(2)+"</div></div>":'<div class="row"><div class="col-xs-12 price" style="">£'+(price/100).toFixed(2)+"</div></div>":'<div class="row"><div class="col-xs-12 price" style=""></div></div>',html+=price_was&&!multi_sku?'<div class="row"><div class="col-xs-12 was-price" style="text-decoration: line-through; ">£'+(price_was/100).toFixed(2)+"</div></div>":'<div class="row"><div class="col-xs-12 was-price" style=""></div></div>',html+=price_was_save&&price_was_percent&&!multi_sku?'<div class="row"><div class="col-xs-12 price-saving" style="">Save £'+(price_was_save/100).toFixed(2)+" ("+price_was_percent+"%)</div></div>":'<div class="row"><div class="col-xs-12 price-saving" style=""></div></div>'}function renderListingMedia(media_url,page_url){return'<div class="row pl_listing_media" style=""><div class="col-xs-12"><a href="/'+page_url+'"><img src="'+media_url+'"/></a></div></div>'}function renderListingTitle(title,device,page_url){var title_char_limit=40;switch(device){case"c1":title_char_limit=40;break;case"c2":title_char_limit=40;break;case"c3":title_char_limit=40;break;case"c4":title_char_limit=40;break;default:title_char_limit=40}var trim_title=title.length<=title_char_limit?title:title.substring(0,title_char_limit)+"...";return'<div class="row"><a href="/'+page_url+'"><div class="col-xs-12"><h4 class="title margin-bottom-none" style="">'+trim_title+"</h4></div></a></div>"}function renderListingPrice(min_price,price,price_per_uom){return min_price?'<div class="pl_listing_price">From £'+(min_price/100).toFixed(2)+"</div>":'<div class="pl_listing_price">£'+(price/100).toFixed(2)+"</div>"}function renderListingReview(qualified,percentage,count){return qualified?'<div class="row"><div class="col-xs-12" style=""><img src="/img/thumbs_green.png" style="height: 15px; margin-top: -3px;" /><span class="margin-right-md" style="color: #3c7f53;">'+percentage+"%</span><span>"+count+" reviews</span></div></div>":'<div class="row"><div class="col-xs-12" style=""></div></div>'}function renderListingCTA(listing){return listing.OutOfStock?'<a href="/'+listing.variant_url+'"><button class="pl_listing_cta default-lg default default-full-width">Sold Out</button></a>':listing.InstoreOnly?'<a href="/'+listing.variant_url+'"><button class="pl_listing_cta default-lg default default-full-width">Instore Only</button></a>':listing.MoreOptions?'<a href="/'+listing.product_url+'"><button class="pl_listing_cta selection-lg selection selection-full-width">More Options</button></a>':g_instore_mode&&listing.instore_blacklist?'<a href="/'+listing.product_url+'"><button class="pl_listing_cta selection-lg selection selection-full-width">Not orderable on Rstore</button></a>':listing.AddToBasket?'<form class="add-to-basket" id="add-to-basket-'+listing.variant_id+'" method="POST" action="/basket"><input name="action" value="add" type="hidden"><input name="prod_id" value="'+listing.product_id+'" type="hidden"><input name="id" value="'+listing.variant_id+'" type="hidden"><input name="quantity" value="1" type="hidden"></form><button id="product-dyn-add-to-bskt-btn-'+listing.product_id+'" class="pl_listing_cta action action-lg action-full-width" onclick="onBasketOptionClick( this, \'add-to-basket-'+listing.variant_id+"' );\">Add to Basket</button>":void 0}function renderListingBadge(listing){var count=0,html='<div class="row"><div class="col-xs-12 badge">';return listing.new_in&&(count++,html+='<div class="badge--new_in">NEW</div>'),listing.show_get_it_fast&&(count++,html+='<div class="badge--express"><img src="/img/product_page_same_day_delivery.png"><span>EXPRESS</span></div>'),listing.as_seen_on_tv&&count<=1&&(html+='<div class="badge--new_in">ON TV</div>'),html+="</div></div>"}var g_pl_filter_arr=!1,g_pl_listing_arr=!1,g_pl_is_search="/search"===window.location.pathname,g_in_stock_only=!1,g_device=!1,g_pl_current_page=1,g_pl_max_per_page=24,g_pl_max_pages=0,g_pl_listings_per_row=4,g_pl_sort="relevance",g_pl_num_filter_applied=0,g_pl_num_qual_listings=0,g_pl_active_filter=!1,g_pl_keyword_filter=!1,g_pl_offers_only=!1,g_pl_applied_filter_arr=[],g_pl_init_complete=!1,g_nonInteraction=!1;$(window).resize(loadDeviceSize);