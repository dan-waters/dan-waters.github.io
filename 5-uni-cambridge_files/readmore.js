!function($){"use strict";function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function uniqueId(prefix){var id=++uniqueIdCounter;return String(null==prefix?"rmjs-":prefix)+id}function setBoxHeights(element){var el=element.clone().css({height:"auto",width:element.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(element),expandedHeight=el.outerHeight(),cssMaxHeight=parseInt(el.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),defaultHeight=element.data("defaultHeight");el.remove();var collapsedHeight=cssMaxHeight||element.data("collapsedHeight")||defaultHeight;element.data({expandedHeight:expandedHeight,maxHeight:cssMaxHeight,collapsedHeight:collapsedHeight}).css({maxHeight:"none"})}function embedCSS(options){if(!cssEmbedded[options.selector]){var styles=" ";options.embedCSS&&""!==options.blockCSS&&(styles+=options.selector+" + [data-readmore-toggle], "+options.selector+"[data-readmore]{"+options.blockCSS+"}"),styles+=options.selector+"[data-readmore]{transition: height "+options.speed+"ms;overflow: hidden;}",function(d,u){var css=d.createElement("style");css.type="text/css",css.styleSheet?css.styleSheet.cssText=u:css.appendChild(d.createTextNode(u)),d.getElementsByTagName("head")[0].appendChild(css)}(document,styles),cssEmbedded[options.selector]=!0}}function Readmore(element,options){this.element=element,this.options=$.extend({},defaults,options),embedCSS(this.options),this._defaults=defaults,this._name=readmore,this.init(),g_posMode||(window.addEventListener?(window.addEventListener("load",resizeBoxes),window.addEventListener("resize",resizeBoxes)):(window.attachEvent("load",resizeBoxes),window.attachEvent("resize",resizeBoxes)))}var readmore="readmore",defaults={speed:2e3,collapsedHeight:166,heightMargin:28,moreLink:'<a class="expand-content" href="#">Read More</a>',lessLink:'<a class="expand-content" href="#">Show Less</a>',embedCSS:!0,blockCSS:"display: block;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},cssEmbedded={},uniqueIdCounter=0,resizeBoxes=debounce(function(){$("[data-readmore]").each(function(){var current=$(this),isExpanded="true"===current.attr("aria-expanded");setBoxHeights(current),current.css({height:current.data(isExpanded?"expandedHeight":"collapsedHeight")})})},100);Readmore.prototype={init:function(){var $this=this,current=$(this.element);current.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),setBoxHeights(current);var collapsedHeight=current.data("collapsedHeight"),heightMargin=current.data("heightMargin");if(current.outerHeight(!0)<=collapsedHeight+heightMargin)return!0;var id=current.attr("id")||uniqueId(),useLink=$this.options.startOpen?$this.options.lessLink:$this.options.moreLink;current.attr({"data-readmore":"","aria-expanded":!1,id:id}),current.after($(useLink).on("click",function(event){$this.toggle(this,current[0],event)}).attr({"data-readmore-toggle":"","aria-controls":id})),$this.options.startOpen||current.css({height:collapsedHeight})},toggle:function(trigger,element,event){event&&event.preventDefault(),trigger||(trigger=$('[aria-controls="'+this.element.id+'"]')[0]),element||(element=this.element);var $this=this,$element=$(element),newHeight="",newLink="",expanded=!1,collapsedHeight=$element.data("collapsedHeight");$element.height()<=collapsedHeight?(newHeight=$element.data("expandedHeight")+4+"px",newLink="lessLink",expanded=!0):(newHeight=collapsedHeight,newLink="moreLink"),$this.options.beforeToggle(trigger,element,!expanded),$element.css({height:newHeight}),$element.on("transitionend",function(){$this.options.afterToggle(trigger,element,expanded),$(this).attr({"aria-expanded":expanded}).off("transitionend")}),$(trigger).replaceWith($($this.options[newLink]).on("click",function(event){$this.toggle(this,element,event)}).attr({"data-readmore-toggle":"","aria-controls":$element.attr("id")}))},destroy:function(){$(this.element).each(function(){var current=$(this);current.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),current.removeData()})}},$.fn.readmore=function(options){var args=arguments,selector=this.selector;return options=options||{},"object"==typeof options?this.each(function(){if($.data(this,"plugin_"+readmore)){var instance=$.data(this,"plugin_"+readmore);instance.destroy.apply(instance)}options.selector=selector,$.data(this,"plugin_"+readmore,new Readmore(this,options))}):"string"==typeof options&&"_"!==options[0]&&"init"!==options?this.each(function(){var instance=$.data(this,"plugin_"+readmore);instance instanceof Readmore&&"function"==typeof instance[options]&&instance[options].apply(instance,Array.prototype.slice.call(args,1))}):void 0}}(jQuery);